!function(){!async function(){try{const t="http://localhost:8000/api/networks",n=await fetch(t),c=await n.json();e=c.networks,o()}catch(e){console.log(e)}}();let e=[];const t={octet:/^([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$/,network:/^[a-zA-Z0-9\_\-\s]{1,20}$/};function o(){const t=e;if(0===t.length){const e=document.querySelector("#listado-redes"),t=document.createElement("THEAD"),o=document.createElement("TR");o.classList.add("table-light");const n=document.createElement("TH");return n.classList.add("fuente-roja"),n.textContent="No hay redes creadas",o.appendChild(n),t.appendChild(o),void e.appendChild(t)}const o=document.createElement("THEAD"),n=document.createElement("TR"),c=document.createElement("TH");c.textContent="Red";const a=document.createElement("TH");a.textContent="IP Global";const r=document.createElement("TH");n.appendChild(c),n.appendChild(a),n.appendChild(r),o.appendChild(n);const d=document.createElement("TBODY");t.forEach(e=>{const t=document.createElement("TR");t.dataset.networkId=e.id;const n=document.createElement("TD");n.textContent=e.network,n.classList.add("editar-red"),n.onclick=function(){console.log("DISTE CLICK")};const c=document.createElement("TD");c.textContent=e.fi_octet+"."+e.s_octet+"."+e.t_octet+"."+e.fo_octet;const a=document.createElement("TD"),r=document.createElement("DIV");r.classList.add("opcion-eliminar");const l=document.createElement("BUTTON");l.classList.add("btn-eliminar"),l.dataset.idNetwork=e.id,l.textContent="Eliminar",r.appendChild(l),a.appendChild(r),t.appendChild(n),t.appendChild(c),t.appendChild(a),d.appendChild(t);const i=document.querySelector("#listado-redes");i.appendChild(o),i.appendChild(d)})}function n(e,t,o){const n=document.querySelector(".alerta");n&&n.remove();const c=document.createElement("DIV");c.classList.add("alerta",t),c.textContent=e,o.parentElement.insertBefore(c,o.nextElementSibling),setTimeout(()=>{c.remove()},5e3)}document.querySelector(".modal-body").addEventListener("click",(function(c){if(c.preventDefault(),c.target.classList.contains("btn-submit")){const c=document.querySelector("#network").value.trim(),a=document.querySelector("#fioctet").value.trim(),r=document.querySelector("#soctet").value.trim(),d=document.querySelector("#toctet").value.trim(),l=document.querySelector("#fooctet").value.trim();if(""===c||""===a||""===r||""===d||""===l)return void n("Completa correctamente el formulario","error",document.querySelector(".modal-header"));if(!t.network.test(c))return void n("El nombre debe contener menos de 20 caracteres y acepta '- ó _'","error",document.querySelector(".modal-header"));if(!(t.octet.test(a)&&t.octet.test(r)&&t.octet.test(d)&&t.octet.test(l)))return void n("Coloca un formato válido para la IP","error",document.querySelector(".modal-header"));!async function(t,c,a,r,d){const l=new FormData;l.append("network",t),l.append("fi_octet",c),l.append("s_octet",a),l.append("t_octet",r),l.append("fo_octet",d);try{const i="http://localhost:8000/api/network",s=await fetch(i,{method:"POST",body:l}),m=await s.json();if(n(m.message,m.type,document.querySelector(".modal-header")),"exito"===m.type){const e=document.querySelector("#modalRed");setTimeout(()=>{e.remove()},2e3)}const u={id:String(m.id),network:t,fi_octet:c,s_octet:a,t_octet:r,fo_octet:d,url:m.url};e=[...e,u],o()}catch(e){console.log(e)}}(c,a,r,d,l)}}))}();